<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mybatis.board">
	<select id="getBoardMaster" parameterType="map" resultType="map">
		SELECT * FROM BOARD_MASTER_T
		<if test="bm_name != null and bm_name.length() > 0">
			WHERE bm_name = #{bm_name}
		</if>
		<if test="bm_no != null and bm_no.length() > 0">
			AND BM_NO LIKE '%'||#{bm_no}||'%'
		</if>
		ORDER BY BM_NO DESC
	</select>

	<select id="getBoardSub" parameterType="map" resultType="map">
		SELECT * FROM BOARD_SUB_T
	</select>

	<select id="getBoardAllList" parameterType="map" resultType="map">
		SELECT BM.BM_NO, BM_TITLE, BM.BM_NAME, BM.BM_DATE, NVL (WM_CONCAT (BS_FILE), '없음') AS "BS_FILE", BM.BM_HIT
		FROM BOARD_MASTER_T BM LEFT OUTER JOIN BOARD_SUB_T BS ON BM.BM_NO = BS.BM_NO
		GROUP BY BM.BM_NO, BM_TITLE, BM.BM_NAME, BM.BM_DATE, BM.BM_HIT ORDER BY BM_NO DESC
	</select>
</mapper>